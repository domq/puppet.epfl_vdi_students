#!/bin/bash

export PATH=/opt/FreeRDS/bin:$PATH
_parent_pid="$$"

run_important_command() {
    "$@" &
    local child_pid=$!
    trap "kill -0 '$child_pid' || kill -HUP '$_parent_pid'" SIGCHLD
    trap "kill $child_pid" SIGHUP SIGTERM SIGQUIT EXIT
}

start_X() {
    run_important_command Xrds "$DISPLAY" "$FREERDS_DESKTOP_WIDTH" "$FREERDS_DESKTOP_HEIGHT" "$FREERDS_DESKTOP_DEPTH"
}
